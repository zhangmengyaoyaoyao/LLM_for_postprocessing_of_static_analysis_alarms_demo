{
    "category": "BAD_PRACTICE",
    "vtype": "SE_INNER_CLASS",
    "priority": "3",
    "rank": "19",
    "project": "configuration",
    "warning_line": "{\nsuper(name);\nsetReference(elem);\n}\npublic void setValue(Object value)\n{\nsuper.setValue(value);\nif (getReference() != null && document != null)\n{\nif (isAttribute())\n{\nupdateAttribute();\n}\nelse\n{\nupdateElement(value);\n}\n}\n}\nprotected void removeReference()\n{\nif (getReference() != null)\n{\nElement element = (Element) getReference();\nif (isAttribute())\n{\nupdateAttribute();\n}\nelse\n{\norg.w3c.dom.Node parentElem = element.getParentNode();\nif (parentElem != null)\n{\nparentElem.removeChild(element);\n}\n}\n}\n}\nprivate void updateElement(Object value)\n{\nText txtNode = findTextNodeForUpdate();\nif (value == null)\n{\nif (txtNode != null)\n{\n((Element) getReference()).removeChild(txtNode);\n}\n}\nelse\n{\nif (txtNode == null)\n{\ntxtNode = document\n.createTextNode(PropertyConverter.escapeDelimiters(\nvalue.toString(), getListDelimiter()));\nif (((Element) getReference()).getFirstChild() != null)\n{\n((Element) getReference()).insertBefore(txtNode,\n((Element) getReference()).getFirstChild());\n}\nelse\n{\n((Element) getReference()).appendChild(txtNode);\n}\n}\nelse\n{\ntxtNode.setNodeValue(PropertyConverter.escapeDelimiters(\nvalue.toString(), getListDelimiter()));\n}\n}\n}\nprivate void updateAttribute()\n{\nXMLBuilderVisitor.updateAttribute(getParent(), getName(), getListDelimiter());\n}\nprivate Text findTextNodeForUpdate()\n{\nText result = null;\nElement elem = (Element) getReference();\nNodeList children = elem.getChildNodes();\nCollection textNodes = new ArrayList();\nfor (int i = 0; i < children.getLength(); i++)\n{\norg.w3c.dom.Node nd = children.item(i);\nif (nd instanceof Text)\n{\nif (result == null)\n{\nresult = (Text) nd;\n}\nelse\n{\ntextNodes.add(nd);\n}\n}\n}\nif (result instanceof CDATASection)\n{\ntextNodes.add(result);\nresult = null;\n}\nfor (Iterator it = textNodes.iterator(); it.hasNext();)\n{\nelem.removeChild((org.w3c.dom.Node) it.next());\n}\nreturn result;\n",
    "warning_method": "private DocumentBuilder documentBuilder;"
}